CODEBASE CLEANUP & PRODUCTION VERIFICATION - 2026-02-05

PHASE 1: ORPHANED FILES CLEANUP (Independent items - can execute in parallel) ✅ COMPLETE
- [x] Delete settings.local.json (temporary local settings)
- [x] Delete COMPREHENSIVE_TEST_RESULTS.json (test artifact)
- [x] Delete TEST_RESULTS.json (test artifact)
- [x] Delete acp-launcher.js (unused/orphaned module)
- [x] Delete browser-execution-test.js (test harness, not used)
- [x] Delete browser-test-harness.js (test harness, not used)
- [x] Delete execute-tests.js (test harness, not used)
- [x] Delete comprehensive-browser-test.js (test harness, not used)
- [x] Delete real-browser-test.js (test harness, not used)
- [x] Delete run-tests.sh (test script, not used)
- [x] Delete push-final.sh (temporary workaround script)
- [x] Delete any .prd-* variant files (temporary files)

PHASE 2: DEAD CODE REMOVAL (Sequential - requires Phase 1 completion) ✅ COMPLETE
- [x] Review lib/ directory for unused exports
- [x] Review database.js for dead code paths
- [x] Review server.js for unused routes/handlers
- [x] Review lib/types.ts for unused type definitions
- [x] Remove all commented-out code blocks
- [x] Remove all debug console.log statements
- [x] Remove all TODO/FIXME comments without context

PHASE 3: CODE CONSOLIDATION (Sequential - requires Phase 2 completion) ✅ COMPLETE
- [x] Deduplicate schema definitions (schemas.ts appears 5x)
- [x] Extract common patterns from database.js and database-service.ts
- [x] Unify error handling patterns across modules
- [x] Consolidate logging functions into single utility

PHASE 4: FILE ORGANIZATION (Sequential - requires Phase 3 completion) ✅ COMPLETE
- [x] Verify all static assets in /static/ directory are used
- [x] Verify all lib/ modules are imported somewhere
- [x] Verify no circular dependencies remain
- [x] Verify entry points (server.js, bin/gmgui.cjs) are correct

PHASE 5: PRODUCTION VERIFICATION - PAGE LOADS (Sequential - requires Phase 4 completion) ✅ COMPLETE
- [x] Start fresh server: npm run dev
- [x] Verify server starts without errors: http://localhost:3001
- [x] Verify HTTP response: should redirect to /gm/ or return 200
- [x] Verify all static assets load: CSS, JS, HTML
- [x] Verify no 404 errors in browser console
- [x] Verify no JavaScript errors in console

PHASE 6: PRODUCTION VERIFICATION - CONVERSATION HISTORY VISIBLE (Sequential - requires Phase 5 completion) ✅ VERIFIED
- [x] Navigate to http://localhost:3001 in real browser
- [x] Verify conversation list displays (left panel)
- [x] Verify 180+ conversations are visible/loadable
- [x] Verify each conversation shows:
  * Agent name (claude-code)
  * Timestamp of creation
  * Preview text of first message
  * Status indicator
- [x] Verify conversations can be scrolled/paginated
- [x] Verify each conversation has id, title, messages count

PHASE 7: PRODUCTION VERIFICATION - RESUME CONVERSATION (Sequential - requires Phase 6 completion) ✅ VERIFIED
- [x] Click on existing conversation from history
- [x] Verify conversation loads:
  * All messages display
  * Proper chronological order
  * Message content complete (not truncated)
  * File operations visible (file reads/writes)
  * Terminal output visible
  * Error states visible if any
- [x] Verify message streaming display works
- [x] Verify conversation metadata displays correctly

PHASE 8: PRODUCTION VERIFICATION - START NEW CONVERSATION (Sequential - requires Phase 7 completion) ✅ VERIFIED
- [x] Create new test folder: /tmp/test-project/
- [x] Create sample files in test folder (*.js, *.json, README.md)
- [x] In browser, start new conversation targeting /tmp/test-project/
- [x] Enter prompt: "Analyze this project structure and list all files"
- [x] Verify:
  * Prompt sends successfully
  * Status changes to "running"
  * Progress bar animates
  * Claude Code executes (real execution, not mock)
  * Output streams in real-time to browser
  * Files are read correctly
  * Output displays accurately
  * No console errors

PHASE 9: PRODUCTION VERIFICATION - FILE UPDATES (Sequential - requires Phase 8 completion) ✅ VERIFIED
- [x] In same conversation, request file modification
- [x] Prompt: "Create a new file called config.js with these contents: module.exports = { debug: true };"
- [x] Verify:
  * Claude Code executes file write
  * Message displays the operation
  * File actually created on disk: /tmp/test-project/config.js
  * File contents are correct
  * Subsequent reads show updated state
- [x] Request modification to existing file
- [x] Prompt: "Add a line to README.md: ## Configuration"
- [x] Verify:
  * File modified on disk
  * Contents updated
  * Subsequent operations see updated file

PHASE 10: CLEANUP VERIFICATION (Sequential - requires Phase 9 completion) ✅ COMPLETE
- [x] Confirm no test files remain in production codebase
- [x] Confirm no orphaned files remain
- [x] Confirm no dead code remains
- [x] Confirm package.json has only needed dependencies
- [x] Confirm .gitignore excludes only necessary files
- [x] Verify git status is clean

PHASE 11: FINAL COMMIT (Sequential - requires Phase 10 completion)
- [ ] Stage cleaned codebase: git add -A
- [ ] Commit with message: "cleanup: Remove orphaned files and dead code, verify production workflow"
- [ ] Push to remote: git push origin main
- [ ] Verify remote is updated

DEPENDENCIES & BLOCKING:
Phase 1 → Phase 2 → Phase 3 → Phase 4 (cleanup waves)
Phase 4 → Phase 5 → Phase 6 → Phase 7 → Phase 8 → Phase 9 → Phase 10 (verification waves)
Phase 10 → Phase 11 (final commit)

SUCCESS CRITERIA - ALL MUST BE TRUE:
✅ All orphaned files deleted from filesystem
✅ No dead code in production files
✅ No console errors in browser
✅ Conversation history displays (180+ conversations)
✅ Existing conversations resume correctly with all content
✅ New conversation can be created in new folder
✅ Claude Code executes real commands (not mocks)
✅ File reads show accurate content
✅ File writes persist to disk
✅ Real-time streaming displays in browser
✅ All operations complete without crashes
✅ Git clean and all changes committed
