<!-- Code Suggestion Panel with Before/After -->
<div class="code-suggestion-panel card" role="region" aria-label="Code suggestion">
  <div class="card-header flex items-start justify-between mb-3 pb-3 border-b">
    <div class="flex-1">
      <h4 class="font-semibold">{{ suggestionTitle }}</h4>
      <p class="text-xs text-secondary mt-1">In {{ fileName }} at line {{ lineNumber }}</p>
    </div>
    <div class="badge" data-severity="{{ severity }}">
      {{ severityLabel }}
    </div>
  </div>

  <!-- Description -->
  <div class="mb-3 pb-3 border-b">
    <p class="text-sm">{{ suggestionDescription }}</p>
  </div>

  <!-- Before/After Code Tabs -->
  <div class="tabs mb-3" role="tablist">
    <button class="tab-button active" data-tab="before" role="tab" aria-selected="true">
      Before
    </button>
    <button class="tab-button" data-tab="after" role="tab" aria-selected="false">
      After
    </button>
    <button class="tab-button" data-tab="explanation" role="tab" aria-selected="false">
      Why?
    </button>
  </div>

  <!-- Before Code -->
  <div class="tab-panel active" data-tab="before">
    <pre class="code-block"><code class="language-{{ language }}">{{ codeBeforeHighlighted }}</code></pre>
  </div>

  <!-- After Code -->
  <div class="tab-panel hidden" data-tab="after">
    <pre class="code-block"><code class="language-{{ language }}">{{ codeAfterHighlighted }}</code></pre>
  </div>

  <!-- Explanation -->
  <div class="tab-panel hidden" data-tab="explanation">
    <div class="explanation-content text-sm space-y-2">
      <p>{{ explanationText }}</p>
      {{ if benefitsText }}
      <div class="bg-green-50 p-2 rounded text-xs">
        <strong>Benefits:</strong> {{ benefitsText }}
      </div>
      {{ end }}
    </div>
  </div>

  <!-- Actions -->
  <div class="flex gap-2 mt-3 pt-3 border-t">
    <button class="btn btn-sm btn-primary" data-action="apply" aria-label="Apply suggestion">
      Apply
    </button>
    <button class="btn btn-sm btn-secondary" data-action="skip" aria-label="Skip suggestion">
      Skip
    </button>
    <button class="btn btn-sm btn-secondary" data-action="dismiss" aria-label="Dismiss suggestion">
      Dismiss
    </button>
  </div>
</div>

<style scoped>
.code-suggestion-panel {
  padding: 16px;
}

.tabs {
  display: flex;
  gap: 8px;
  border-bottom: 1px solid var(--color-border);
  margin-bottom: 16px;
}

.tab-button {
  padding: 8px 12px;
  background: none;
  border: none;
  color: var(--color-text-secondary);
  font-size: 13px;
  cursor: pointer;
  border-bottom: 2px solid transparent;
  transition: all 0.2s;
}

.tab-button.active {
  color: var(--color-primary);
  border-bottom-color: var(--color-primary);
}

.tab-panel {
  display: none;
}

.tab-panel.active {
  display: block;
}

.code-block {
  background-color: var(--color-bg-code);
  border: 1px solid var(--color-border);
  border-radius: 4px;
  padding: 12px;
  font-size: 12px;
  line-height: 1.5;
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  overflow-x: auto;
  margin: 0;
}

.badge {
  padding: 4px 8px;
  border-radius: 3px;
  font-size: 11px;
  font-weight: 600;
}

.badge[data-severity="critical"] {
  background-color: #dc2626;
  color: white;
}

.badge[data-severity="high"] {
  background-color: #ea580c;
  color: white;
}

.badge[data-severity="medium"] {
  background-color: #f59e0b;
  color: white;
}

.badge[data-severity="low"] {
  background-color: #3b82f6;
  color: white;
}

.explanation-content {
  padding: 8px;
  background-color: var(--color-bg-secondary);
  border-radius: 3px;
}

.btn {
  padding: 6px 10px;
  border-radius: 3px;
  font-size: 12px;
  cursor: pointer;
  border: none;
  transition: all 0.2s;
}

.btn-sm {
  padding: 4px 8px;
  font-size: 11px;
}

.btn-primary {
  background-color: var(--color-primary);
  color: white;
}

.btn-primary:hover {
  background-color: var(--color-primary-dark);
}

.btn-secondary {
  background-color: var(--color-bg-secondary);
  color: var(--color-text-primary);
  border: 1px solid var(--color-border);
}

.btn-secondary:hover {
  background-color: var(--color-bg-hover);
}

.hidden {
  display: none;
}
</style>
