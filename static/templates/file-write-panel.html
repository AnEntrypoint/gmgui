<!-- File Write Operation Display with Before/After Comparison -->
<div class="file-write-panel card" role="region" aria-label="File write operation: {{ filePath }}">
  <div class="card-header flex items-start justify-between gap-3 mb-3 pb-3 border-b">
    <div class="flex items-center gap-2 flex-1 min-w-0">
      <svg class="w-4 h-4 text-primary flex-shrink-0" fill="currentColor" viewBox="0 0 20 20" aria-hidden="true">
        <path d="M11 3a1 1 0 10-2 0v1a1 1 0 102 0V3zM15.657 5.757a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414l.707-.707zM18 10a1 1 0 01-1 1h-1a1 1 0 110-2h1a1 1 0 011 1zM15.657 14.243a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414l.707.707zM11 17a1 1 0 102 0v-1a1 1 0 10-2 0v1zM5.757 15.657a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414l-.707.707zM2 10a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.757 4.343a1 1 0 00-1.414 1.414l.707.707a1 1 0 001.414-1.414l-.707-.707z"/>
      </svg>
      <div class="flex-1 min-w-0">
        <h4 class="font-semibold text-sm truncate">{{ fileName }}</h4>
        <p class="text-xs text-secondary truncate" title="{{ filePath }}">{{ filePath }}</p>
      </div>
    </div>

    <div class="flex items-center gap-2 flex-shrink-0">
      <span class="badge badge-sm bg-yellow-100 text-yellow-800">Modified</span>
    </div>
  </div>

  <!-- Tabs: Before/After/Diff -->
  <div class="tabs mb-3" role="tablist">
    <button class="tab-button active" data-tab="before" role="tab" aria-selected="true" aria-controls="before-panel">
      Before
    </button>
    <button class="tab-button" data-tab="after" role="tab" aria-selected="false" aria-controls="after-panel">
      After
    </button>
    <button class="tab-button" data-tab="diff" role="tab" aria-selected="false" aria-controls="diff-panel">
      Diff
    </button>
  </div>

  <!-- Before Panel -->
  <div id="before-panel" class="tab-panel active" role="tabpanel" aria-labelledby="before-tab">
    <pre class="code-block"><code class="language-{{ languageClass }}">{{ contentBefore }}</code></pre>
  </div>

  <!-- After Panel -->
  <div id="after-panel" class="tab-panel hidden" role="tabpanel" aria-labelledby="after-tab">
    <pre class="code-block"><code class="language-{{ languageClass }}">{{ contentAfter }}</code></pre>
  </div>

  <!-- Diff Panel -->
  <div id="diff-panel" class="tab-panel hidden" role="tabpanel" aria-labelledby="diff-tab">
    <pre class="code-block diff-block"><code>{{ diffContent }}</code></pre>
  </div>

  <!-- Action Buttons -->
  <div class="flex gap-2 mt-3 pt-3 border-t">
    <button class="btn btn-sm btn-tertiary" data-action="copy-before" aria-label="Copy original content">
      Copy Before
    </button>
    <button class="btn btn-sm btn-tertiary" data-action="copy-after" aria-label="Copy new content">
      Copy After
    </button>
    <button class="btn btn-sm btn-tertiary" data-action="download-diff" aria-label="Download diff">
      Download Diff
    </button>
  </div>
</div>

<style scoped>
.file-write-panel {
  padding: 16px;
}

.tabs {
  display: flex;
  gap: 8px;
  border-bottom: 1px solid var(--color-border);
  margin-bottom: 16px;
}

.tab-button {
  padding: 8px 12px;
  background: none;
  border: none;
  color: var(--color-text-secondary);
  font-size: 13px;
  cursor: pointer;
  border-bottom: 2px solid transparent;
  transition: all 0.2s;
}

.tab-button.active {
  color: var(--color-primary);
  border-bottom-color: var(--color-primary);
}

.tab-panel {
  display: none;
}

.tab-panel.active {
  display: block;
}

.code-block {
  background-color: var(--color-bg-code);
  border: 1px solid var(--color-border);
  border-radius: 4px;
  padding: 12px;
  overflow-x: auto;
  font-size: 12px;
  line-height: 1.5;
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
}

.diff-block {
  background-color: var(--color-bg-diff);
}

.btn-sm {
  padding: 4px 8px;
  font-size: 11px;
}

.hidden {
  display: none;
}
</style>
